<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="clr-namespace:ChessFederationManager.UI.ViewModels"
             x:Class="ChessFederationManager.UI.Views.GamesView"
             x:DataType="d:GamesViewModel">

  <Grid RowDefinitions="Auto,Auto,*,Auto" Margin="12">

    <!-- Competition selection -->
    <StackPanel Orientation="Horizontal" Spacing="8">
      <TextBlock Text="Competition"/>
      <ComboBox ItemsSource="{Binding Competitions}"
                SelectedItem="{Binding SelectedCompetition}"
                Width="220">
        <ComboBox.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Name}"/>
          </DataTemplate>
        </ComboBox.ItemTemplate>
      </ComboBox>
      <Button Content="Refresh" Click="Refresh_Click"/>
    </StackPanel>

    <!-- Game creation -->
    <Grid Grid.Row="1" ColumnDefinitions="*,*,Auto" ColumnSpacing="8" Margin="0,10,0,10">
      <StackPanel>
        <TextBlock Text="White player"/>
        <ComboBox ItemsSource="{Binding CompetitionPlayers}"
                  SelectedItem="{Binding SelectedWhitePlayer}"
                  Width="220"/>
      </StackPanel>

      <StackPanel Grid.Column="1">
        <TextBlock Text="Black player"/>
        <ComboBox ItemsSource="{Binding CompetitionPlayers}"
                  SelectedItem="{Binding SelectedBlackPlayer}"
                  Width="220"/>
      </StackPanel>

      <StackPanel Grid.Column="2" VerticalAlignment="Bottom">
        <Button Content="Create game" Click="CreateGame_Click"/>
      </StackPanel>
    </Grid>

    <!-- Games + moves -->
    <Grid Grid.Row="2" ColumnDefinitions="2*,*" ColumnSpacing="12">
      <DataGrid ItemsSource="{Binding Games}"
                SelectedItem="{Binding SelectedGame}"
                AutoGenerateColumns="False">
        <DataGrid.Columns>
          <DataGridTextColumn Header="White" Binding="{Binding WhitePlayer}" Width="2*"/>
          <DataGridTextColumn Header="Black" Binding="{Binding BlackPlayer}" Width="2*"/>
          <DataGridTextColumn Header="Result" Binding="{Binding ResultText}" Width="*"/>
          <DataGridTextColumn Header="Moves" Binding="{Binding MovesDisplay}" Width="2*"/>
        </DataGrid.Columns>
      </DataGrid>

      <StackPanel Grid.Column="1" Spacing="8">
        <TextBlock Text="Moves"/>
        <ListBox Height="180"
                 DataContext="{Binding SelectedGame}"
                 ItemsSource="{Binding Game.Moves}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal" Spacing="6">
                <TextBlock Text="{Binding Ply}"/>
                <TextBlock Text="{Binding Notation}"/>
              </StackPanel>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Orientation="Horizontal" Spacing="6">
          <TextBox Width="150" Watermark="Move notation" Text="{Binding NewMoveNotation}"/>
          <Button Content="Add move" Click="AddMove_Click"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Spacing="6">
          <ComboBox ItemsSource="{Binding GameResults}"
                    SelectedItem="{Binding SelectedResult}"
                    Width="120"/>
          <Button Content="Set result" Click="Result_Click"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Spacing="6">
          <Button Content="Delete game" Click="Delete_Click"/>
        </StackPanel>
      </StackPanel>
    </Grid>

    <TextBlock Grid.Row="3" Text="{Binding Status}" Margin="0,10,0,0"/>
  </Grid>
</UserControl>
